# üöÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è Figma –ø–ª–∞–≥–∏–Ω–∞

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### ‚úÖ Dashboard (server.js)
1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π CORS middleware** - –ø–æ–∑–≤–æ–ª—è–µ—Ç Figma –ø–ª–∞–≥–∏–Ω—É –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
2. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **–£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è CORS headers** - —Ç–µ–ø–µ—Ä—å –≤—Å–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ

## üìã –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@bublickrust.ru

# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /root/dsbot

# 3. –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dashboard
cd dashboard
pm2 restart dsbot

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs dsbot --lines 50
```

## üîç –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:

–ö–æ–≥–¥–∞ Figma –ø–ª–∞–≥–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞–ø—Ä–æ—Å, –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
üì§ [Image Upload] Request received
   Headers: {
     "authorization": "Bearer 58076245d1f7985...",
     "content-type": "multipart/form-data; boundary=...",
     ...
   }
   File: figma-image-10352062.png (451156 bytes)
   ‚úÖ Authenticated as: username
```

–ò–ª–∏ –µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞:

```
üì§ [Image Upload] Request received
   Headers: {...}
   File: NO FILE
   ‚ùå Auth failed
```

## üß™ –¢–µ—Å—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. **–í Figma:** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–ª–∞–≥–∏–Ω (`Ctrl+Alt+P` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–≥–∏–Ω —Å–Ω–æ–≤–∞)
2. **–í—ã–±–µ—Ä–∏—Ç–µ Frame** —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
3. **–ù–∞–∂–º–∏—Ç–µ "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥"**
4. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:** –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ `pm2 logs dsbot`

## ‚ö° –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç preflight –∑–∞–ø—Ä–æ—Å—ã
**–î–æ:**
- CORS headers –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π endpoint
- OPTIONS –∑–∞–ø—Ä–æ—Å –º–æ–≥ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å

**–ü–æ—Å–ª–µ:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π middleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ OPTIONS –∑–∞–ø—Ä–æ—Å—ã
- CORS headers –Ω–∞ –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Ç –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
**–î–æ:**
- –ù–µ—è—Å–Ω–æ, –¥–æ—Ö–æ–¥—è—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç Figma

**–ü–æ—Å–ª–µ:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç headers, file, auth —Å—Ç–∞—Ç—É—Å
- –õ–µ–≥–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Figma –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```
üì§ [1/1] –ó–∞–≥—Ä—É–∂–∞—é: figma-image-10352062.png
   üìä –†–∞–∑–º–µ—Ä: 440.59 KB
   üî® –°–æ–∑–¥–∞—é multipart/form-data...
   üì¶ –†–∞–∑–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞: 440.77 KB
   üåê –û—Ç–ø—Ä–∞–≤–∫–∞ POST –Ω–∞: https://bublickrust.ru/api/images/upload
   üîë Authorization: Bearer 58076245d1f7985...
   üì• –°—Ç–∞—Ç—É—Å: 200 OK
   üìÑ –û—Ç–≤–µ—Ç: {"success":true,...}
   ‚úÖ –£—Å–ø–µ—Ö! URL: https://bublickrust.ru/i/ABC1234
```

---

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å:

–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∏—Ö –º–Ω–µ:

```bash
pm2 logs dsbot --lines 100 > figma_logs.txt
cat figma_logs.txt
```

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ Figma, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –æ—Ç–≤–µ—Ç.

