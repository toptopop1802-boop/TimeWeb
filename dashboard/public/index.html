<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сайт</title>
    <link rel="stylesheet" href="main-page.css">
</head>
<body>
    <div class="background"></div>
    
    <section class="hero-section">
        <img src="images/Group 119679.png" alt="Изображение">
    </section>
    
    <section class="second-section">
        <img src="images/Mask group.png" alt="Изображение">
        <div class="glow-effect"></div>
        <h1 class="section-title-overlay">ИГРОВЫЕ РЕЖИМЫ</h1>
        <p class="section-subtitle">Уникальные режимы под каждый стиль игры</p>
        <div class="combat-badge">COMBAT</div>
        <div class="training-badge">TRAINING</div>
        <div class="battlefield-badge">BATTLEFIELD</div>
        <div class="pve-badge">PVE</div>
        <div class="survival-badge">SURVIVAL</div>
    </section>
    
    <section class="third-section">
        <div class="game-card">
            <img src="images/image 15.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
        <div class="game-card">
            <img src="images/image temnone.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
        <div class="game-card">
            <img src="images/image temnone.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
        <div class="game-card">
            <img src="images/image 15.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
        <div class="game-card">
            <img src="images/image temnone.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
        <div class="game-card">
            <img src="images/image temnone.png" alt="CUBE" class="card-image">
            <div class="card-new-badge">NEW</div>
            <h2 class="card-title">CUBE</h2>
        </div>
    </section>
    
    <section class="rating-section">
        <h2 class="rating-title">ОЦЕНИТЕ НАШ САЙТ</h2>
        <p class="rating-subtitle">Ваше мнение важно для нас</p>
        <div class="stars-container" id="starsContainer">
            <svg class="star" data-rating="1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <svg class="star" data-rating="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <svg class="star" data-rating="3" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <svg class="star" data-rating="4" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <svg class="star" data-rating="5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
        </div>
        <p class="rating-message" id="ratingMessage"></p>
    </section>
    
    <div class="scroll-indicator">
        <div class="circle-small active" data-section="0"></div>
        <div class="circle-medium inactive" data-section="1"></div>
        <div class="circle-large inactive" data-section="2"></div>
    </div>
    <script>
        const circles = document.querySelectorAll('.scroll-indicator > div');
        
        function updateActiveCircle() {
            const scrollPosition = window.scrollY;
            const windowHeight = window.innerHeight;
            const section = Math.floor(scrollPosition / windowHeight);
            const activeSection = Math.min(section, 2);
            
            circles.forEach((circle, index) => {
                if (index === activeSection) {
                    circle.classList.add('active');
                    circle.classList.remove('inactive');
                } else {
                    circle.classList.remove('active');
                    circle.classList.add('inactive');
                }
            });
        }
        
        window.addEventListener('scroll', updateActiveCircle);
        updateActiveCircle();
        
        // Rating system
        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1383867565964525799/EmzMadL49Jrs3yMrTUJlH3DxGgS8IWYtjhKWJxTgqOwO8sKW4_pfPt5SRG6gfBkf0_J_';
        const stars = document.querySelectorAll('.star');
        const ratingMessage = document.getElementById('ratingMessage');
        const starsContainer = document.getElementById('starsContainer');
        
        // Check if user already voted
        const hasVoted = localStorage.getItem('hasVoted');
        
        if (hasVoted) {
            const savedRating = localStorage.getItem('userRating');
            starsContainer.classList.add('voted');
            ratingMessage.textContent = `Вы уже проголосовали (${savedRating} ${getStarWord(savedRating)})`;
            ratingMessage.style.color = '#929292';
            highlightStars(parseInt(savedRating));
        }
        
        let selectedRating = 0;
        
        stars.forEach(star => {
            star.addEventListener('mouseenter', function() {
                if (!hasVoted && selectedRating === 0) {
                    const rating = this.getAttribute('data-rating');
                    highlightStars(rating, true);
                }
            });
            
            star.addEventListener('click', async function() {
                if (hasVoted) {
                    ratingMessage.textContent = 'Вы уже голосовали!';
                    ratingMessage.style.color = '#ff6b6b';
                    return;
                }
                
                const rating = this.getAttribute('data-rating');
                selectedRating = parseInt(rating);
                highlightStars(rating, false);
                starsContainer.classList.add('voted');
                
                // Send to Discord
                try {
                    const response = await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            embeds: [{
                                title: '⭐ Новая оценка сайта',
                                description: `Пользователь поставил **${rating}** ${getStarWord(rating)}`,
                                color: getRatingColor(rating),
                                timestamp: new Date().toISOString(),
                                footer: {
                                    text: 'Система оценки сайта'
                                }
                            }]
                        })
                    });
                    
                    if (response.ok) {
                        localStorage.setItem('hasVoted', 'true');
                        localStorage.setItem('userRating', rating);
                        ratingMessage.textContent = `Спасибо за вашу оценку! (${rating} ${getStarWord(rating)})`;
                        ratingMessage.style.color = '#7AFF4A';
                        
                        // Запуск анимации падающих звезд
                        createStarAnimation(rating);
                    } else {
                        ratingMessage.textContent = 'Ошибка отправки. Попробуйте позже.';
                        ratingMessage.style.color = '#ff6b6b';
                        starsContainer.classList.remove('voted');
                    }
                } catch (error) {
                    ratingMessage.textContent = 'Ошибка отправки. Попробуйте позже.';
                    ratingMessage.style.color = '#ff6b6b';
                    starsContainer.classList.remove('voted');
                }
            });
        });
        
        starsContainer.addEventListener('mouseleave', function() {
            if (!hasVoted && selectedRating === 0) {
                stars.forEach(star => {
                    star.classList.remove('active', 'star-1', 'star-2', 'star-3', 'star-4', 'star-5');
                });
            }
        });
        
        function highlightStars(rating, isHover = false) {
            stars.forEach(star => {
                const starRating = star.getAttribute('data-rating');
                star.classList.remove('active', 'star-1', 'star-2', 'star-3', 'star-4', 'star-5');
                
                if (starRating <= rating) {
                    star.classList.add('active');
                    if (!isHover) {
                        star.classList.add(`star-${starRating}`);
                    } else {
                        star.classList.add(`star-${rating}`);
                    }
                }
            });
        }
        
        function getStarWord(rating) {
            const words = ['звезду', 'звезды', 'звезды', 'звезды', 'звезд'];
            return words[rating - 1];
        }
        
        function getRatingColor(rating) {
            const colors = [0xff4444, 0xff8844, 0xffcc44, 0x88ff44, 0x44ff88];
            return colors[rating - 1];
        }
        
        function createStarAnimation(rating) {
            const colors = [
                'rgba(255, 68, 68, 0.9)',      // 1 - красная
                'rgba(255, 204, 68, 0.9)',     // 2 - желтая
                'rgba(255, 204, 68, 0.9)',     // 3 - желтая
                'rgba(122, 255, 74, 0.9)',     // 4 - зеленая
                'rgba(68, 255, 136, 1)'        // 5 - ярко зеленая
            ];
            
            const starColor = colors[rating - 1];
            const starCount = rating * 15; // Больше звезд для высоких оценок
            
            for (let i = 0; i < starCount; i++) {
                setTimeout(() => {
                    createFallingStar(starColor, rating);
                }, i * 50);
            }
        }
        
        function createFallingStar(color, rating) {
            const star = document.createElement('div');
            star.className = 'falling-star';
            
            // Случайная позиция: слева или справа
            const fromLeft = Math.random() > 0.5;
            const startX = fromLeft ? Math.random() * 30 : 70 + Math.random() * 30;
            const startY = Math.random() * 40;
            
            // Конечная позиция - к центру внизу
            const endX = 40 + Math.random() * 20;
            const endY = 85 + Math.random() * 10;
            
            star.style.left = startX + '%';
            star.style.top = startY + '%';
            star.style.setProperty('--end-x', endX + '%');
            star.style.setProperty('--end-y', endY + '%');
            
            // Размер звезды
            const size = 15 + Math.random() * 25;
            star.style.width = size + 'px';
            star.style.height = size + 'px';
            
            // Цвет звезды
            star.style.background = color;
            star.style.boxShadow = `0 0 ${size}px ${color}, 0 0 ${size * 2}px ${color}`;
            
            // SVG звезды
            star.innerHTML = `
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: 100%;">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="${color}"/>
                </svg>
            `;
            
            // Длительность анимации
            const duration = 1.5 + Math.random() * 1;
            star.style.animationDuration = duration + 's';
            
            document.body.appendChild(star);
            
            // Удаление после анимации
            setTimeout(() => {
                star.remove();
            }, duration * 1000 + 500);
        }
    </script>
</body>
</html>
