# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Stripe –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ Stripe —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –≤–∞—à–µ–º —Å–∞–π—Ç–µ. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞.

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **SQL —Ç–∞–±–ª–∏—Ü—ã** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
2. **API endpoints** - –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º
3. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü:

```bash
psql -h your-db-host -U your-username -d your-database -f dashboard/setup_stripe_accounts.sql
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ Supabase Dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dashboard/setup_stripe_accounts.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints

API endpoints —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `dashboard/server.js`. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:

```bash
cd dashboard
node server.js
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://bublickrust.ru/stripe-accounts.html
```

–ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
```
http://localhost:3000/stripe-accounts.html
```

#### –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã"
2. –í—Å—Ç–∞–≤—å—Ç–µ –∞–∫–∫–∞—É–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `email:password` (–∫–∞–∂–¥—ã–π –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ)
3. –ù–∞–∂–º–∏—Ç–µ "üì• –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã"

–ü—Ä–∏–º–µ—Ä:
```
hodson00737@bublickrust.ru:Qfwm8yhrkyBB
burton_9495@bublickrust.ru:cuurg!DfCFT1
feofilakt_7693@bublickrust.ru:J6KY!S)N6jWT
```

### –®–∞–≥ 4: –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
2. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
3. –í–∫–ª—é—á–∏—Ç–µ "–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ"
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `Cursor/`

## üì° API Endpoints

### –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
```
GET /api/stripe-accounts/random
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "email": "hodson00737@bublickrust.ru",
  "password": "Qfwm8yhrkyBB",
  "account_type": "FREE"
}
```

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã
```
GET /api/stripe-accounts?type=PRO&active=true
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```
GET /api/stripe-accounts/stats
```

### –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
```
POST /api/stripe-accounts
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "account_type": "FREE",
  "registration_location": "Moscow, Russia",
  "notes": "Test account"
}
```

### –û–±–Ω–æ–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
```
PATCH /api/stripe-accounts/:id
Content-Type: application/json

{
  "account_type": "PRO",
  "is_active": true,
  "notes": "Upgraded to PRO"
}
```

### –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
```
DELETE /api/stripe-accounts/:id
```

### –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```
POST /api/stripe-accounts/log-usage
Content-Type: application/json

{
  "email": "test@example.com",
  "account_type": "PRO",
  "success": true,
  "error_message": null,
  "registration_location": "Moscow, Russia"
}
```

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ Stripe checkout, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ (`/api/stripe-accounts/random`)
2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ email –∏ password –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
3. –ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `/api/stripe-accounts/log-usage`

### 2. –°–µ—Ä–≤–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç
- –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (`is_active = true`)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–≤–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å (`ORDER BY last_used`)
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `last_used` timestamp
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `stripe_accounts_usage_log`

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
–ï—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑ (–Ω–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é):
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ —Å email
- –ü–∞—Ä–æ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ "auto-generated"
- –¢–∏–ø –∞–∫–∫–∞—É–Ω—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (PRO/FREE)
- –õ–æ–∫–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ IP

## üìä –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å)
- **–í—Å–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **PRO –∞–∫–∫–∞—É–Ω—Ç—ã** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ PRO –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- **FREE –∞–∫–∫–∞—É–Ω—Ç—ã** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ FREE –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- **–ê–∫—Ç–∏–≤–Ω—ã–µ** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### –í–∫–ª–∞–¥–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã"
- **–ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ** - –≤—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `email:password`
- **–î–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω** - –¥–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É

### –í–∫–ª–∞–¥–∫–∞ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
- **–§–∏–ª—å—Ç—Ä—ã** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –∏ —Å—Ç–∞—Ç—É—Å—É
- **–¢–∞–±–ª–∏—Ü–∞** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:
  - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
  - –£–¥–∞–ª–∏—Ç—å
  - –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **API –¥–æ—Å—Ç—É–ø** - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö endpoints
2. **HTTPS** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ HTTPS –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
3. **CORS** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç—ã
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Console –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É Network –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ `/api/stripe-accounts/random`
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API_BASE –≤ `stripe-content.js` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–º–µ–Ω

### –ê–∫–∫–∞—É–Ω—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ SQL-—Å–∫—Ä–∏–ø—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –õ–æ–≥–∏
–í–∫–ª—é—á–∏—Ç–µ verbose –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```javascript
// –í stripe-content.js
console.log('üîç Debug info:', { serverAccount, cardData });
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
```python
import requests

accounts = [
    ("email1@example.com", "password1"),
    ("email2@example.com", "password2"),
]

for email, password in accounts:
    response = requests.post(
        "https://bublickrust.ru/api/stripe-accounts",
        json={"email": email, "password": password}
    )
    print(f"Added {email}: {response.status_code}")
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ curl
```bash
curl https://bublickrust.ru/api/stripe-accounts/stats
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ curl
```bash
curl https://bublickrust.ru/api/stripe-accounts/random
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã —Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

